<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StyleSwap AI - Virtual Room Makeover</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Aurora gradient animated background */
        .aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1e1b4b, #312e81, #7c3aed, #ec4899, #f59e0b, #10b981);
            background-size: 400% 400%;
            animation: aurora 30s ease infinite;
            z-index: -1;
        }
        
        @keyframes aurora {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Glassmorphism effects */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
        }
        
        .glass-input {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Entrance animations */
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Glow effects */
        .glow-blue {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .glow-blue-intense {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
        }
        
        .upload-glow {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.4); }
        }
        
        /* Floating animation for upload icon */
        .float {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Preset button styles */
        .preset-glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .preset-glass:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }
        
        .preset-glass.active {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        
        /* Generate button redesign */
        .generate-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(147, 51, 234, 0.8));
            backdrop-filter: blur(12px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .generate-btn:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.5);
        }
        
        .generate-btn:active:not(:disabled) {
            transform: scale(0.95);
        }
        
        /* Ripple effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
        }
        
        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Custom spinner */
        .custom-spinner {
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Results viewer placeholder */
        .results-placeholder {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .orb {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.6), rgba(147, 51, 234, 0.6));
            animation: pulse-orb 2s ease-in-out infinite;
        }
        
        @keyframes pulse-orb {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        
        /* Scan line animation */
        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, transparent);
            animation: scan 3s ease-in-out;
            z-index: 20;
        }
        
        @keyframes scan {
            0% { top: 0; opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }
        
        /* Enhanced slider */
        .image-comparison-container {
            position: relative;
            overflow: hidden;
            border-radius: 1rem;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .image-comparison-slider {
            position: absolute;
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, #3b82f6, #8b5cf6);
            cursor: ew-resize;
            z-index: 10;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .image-comparison-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: 2px solid white;
            border-radius: 50%;
            cursor: ew-resize;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.6);
        }
        
        .image-comparison-after {
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            overflow: hidden;
        }
        
        .image-comparison-before {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-comparison-after img {
            width: 200%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .desktop-two-column {
                flex-direction: column;
            }
            
            .generate-btn {
                position: relative;
                margin: 20px auto;
            }
        }
    </style>
</head>
<body class="min-h-screen overflow-x-hidden">
    <!-- Aurora gradient background -->
    <div class="aurora-bg"></div>
    
    <div class="max-w-7xl mx-auto px-4 py-8 relative z-10">
        <!-- Header with entrance animation -->
        <header class="text-center mb-12 fade-in-up">
            <h1 class="text-5xl md:text-6xl font-bold mb-4 text-white">StyleSwap AI</h1>
            <p class="text-xl md:text-2xl text-gray-200 max-w-3xl mx-auto">
                Reimagine your space in seconds. Upload a photo, describe a style, and let AI transform your room.
            </p>
        </header>

        <!-- Two-column layout for desktop -->
        <div class="desktop-two-column flex gap-8 items-start">
            <!-- Left Column: Controls -->
            <div class="flex-1 space-y-6">
                <!-- Glass control panel -->
                <div class="glass p-8 fade-in-up" style="animation-delay: 0.2s;">
                    <!-- Step 1: Upload Your Room -->
                    <div class="mb-8">
                        <h2 class="text-2xl font-semibold mb-6 text-white">Step 1: Upload Your Room</h2>
                        <label for="imageUpload" class="block">
                            <div class="border-2 border-dashed border-blue-400 rounded-xl p-12 text-center cursor-pointer hover:border-blue-300 transition-all duration-300 upload-glow hover:glow-blue-intense">
                                <svg class="mx-auto h-16 w-16 text-blue-400 mb-4 float" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                </svg>
                                <p class="text-gray-200 text-lg">
                                    Drag & drop an image or <span class="font-semibold text-blue-300">click to upload</span>
                                </p>
                            </div>
                            <input type="file" id="imageUpload" accept="image/*" class="hidden">
                        </label>
                    </div>

                    <!-- Step 2: Describe Your New Style -->
                    <div>
                        <h2 class="text-2xl font-semibold mb-6 text-white">Step 2: Describe Your New Style</h2>
                        <input 
                            type="text" 
                            id="stylePrompt" 
                            placeholder="e.g., 'Cozy cottage with a stone fireplace' or 'Cyberpunk neon'..."
                            class="w-full px-6 py-4 glass-input rounded-xl text-gray-100 placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:glow-blue transition-all duration-300 mb-6"
                        >
                        
                        <!-- Redesigned preset buttons -->
                        <div class="flex flex-wrap gap-3">
                            <button class="preset-btn preset-glass px-6 py-3 text-blue-300 rounded-full text-sm font-medium" data-style="Modern">✨ Modern</button>
                            <button class="preset-btn preset-glass px-6 py-3 text-blue-300 rounded-full text-sm font-medium" data-style="Vintage">🏛️ Vintage</button>
                            <button class="preset-btn preset-glass px-6 py-3 text-blue-300 rounded-full text-sm font-medium" data-style="Cyberpunk">🌆 Cyberpunk</button>
                            <button class="preset-btn preset-glass px-6 py-3 text-blue-300 rounded-full text-sm font-medium" data-style="Minimalist">⚪ Minimalist</button>
                            <button class="preset-btn preset-glass px-6 py-3 text-blue-300 rounded-full text-sm font-medium" data-style="Cozy Cottage">🏡 Cozy Cottage</button>
                        </div>
                    </div>
                </div>

                <!-- Circular generate button -->
                <div class="text-center">
                    <button 
                        id="generateBtn" 
                        disabled
                        class="generate-btn flex items-center justify-center text-white font-bold text-2xl disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <span id="generateIcon">✨</span>
                        <div id="generateSpinner" class="custom-spinner hidden"></div>
                    </button>
                </div>
            </div>

            <!-- Right Column: Results Viewer -->
            <div class="flex-1">
                <div class="glass p-6 fade-in-up" style="animation-delay: 0.4s;">
                    <h2 class="text-2xl font-semibold mb-6 text-white text-center">Your Room Transformation</h2>
                    
                    <div class="image-comparison-container" style="height: 500px;">
                        <!-- Enhanced placeholder -->
                        <div id="placeholderState" class="results-placeholder flex flex-col items-center justify-center h-full rounded-xl">
                            <div class="orb mb-6"></div>
                            <p class="text-gray-200 text-xl font-medium">Your future room awaits</p>
                            <p class="text-gray-400 text-sm mt-2">Upload an image to begin the transformation</p>
                        </div>
                        
                        <!-- Before Image (Bottom Layer) -->
                        <img id="beforeImage" src="/placeholder.svg" alt="Before" class="image-comparison-before hidden">
                        
                        <!-- After Image Container (Top Layer) -->
                        <div class="image-comparison-after">
                            <img id="afterImage" src="/placeholder.svg" alt="After" class="hidden">
                            
                            <!-- Enhanced loading state -->
                            <div id="loadingState" class="hidden flex flex-col items-center justify-center h-full">
                                <div class="custom-spinner mb-4"></div>
                                <p class="text-gray-200 text-lg">AI is reimagining your space...</p>
                                <div id="scanLine" class="scan-line hidden"></div>
                            </div>
                            
                            <!-- Error State -->
                            <div id="errorState" class="hidden flex flex-col items-center justify-center h-full">
                                <svg class="h-16 w-16 text-red-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <p class="text-red-400 text-center text-lg">Something went wrong. Please try again.</p>
                            </div>
                        </div>
                        
                        <!-- Enhanced slider handle -->
                        <div class="image-comparison-slider hidden">
                            <div class="image-comparison-handle">
                                <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between text-sm text-gray-300 mt-4 hidden" id="sliderLabels">
                        <span>Before</span>
                        <span>After</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let uploadedImageData = null;
        let isSliding = false;

        // DOM elements
        const imageUpload = document.getElementById('imageUpload');
        const stylePrompt = document.getElementById('stylePrompt');
        const generateBtn = document.getElementById('generateBtn');
        const generateIcon = document.getElementById('generateIcon');
        const generateSpinner = document.getElementById('generateSpinner');
        const placeholderState = document.getElementById('placeholderState');
        const beforeImage = document.getElementById('beforeImage');
        const afterImage = document.getElementById('afterImage');
        const loadingState = document.getElementById('loadingState');
        const errorState = document.getElementById('errorState');
        const scanLine = document.getElementById('scanLine');
        const slider = document.querySelector('.image-comparison-slider');
        const afterContainer = document.querySelector('.image-comparison-after');
        const sliderLabels = document.getElementById('sliderLabels');

        imageUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                uploadedImageData = e.target.result;
                
                // Hide placeholder and show before image
                placeholderState.classList.add('hidden');
                beforeImage.src = uploadedImageData;
                beforeImage.classList.remove('hidden');
                
                generateBtn.disabled = false;
                
                // Reset after image state
                afterImage.classList.add('hidden');
                loadingState.classList.add('hidden');
                errorState.classList.add('hidden');
                slider.classList.add('hidden');
                sliderLabels.classList.add('hidden');
            };
            reader.readAsDataURL(file);
        });

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');
                stylePrompt.value = this.dataset.style;
            });
        });

        generateBtn.addEventListener('click', function(e) {
            if (this.disabled) return;
            
            // Create ripple effect
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
            
            handleGenerateClick();
        });

        async function handleGenerateClick() {
            if (!uploadedImageData || !stylePrompt.value.trim()) return;

            generateBtn.disabled = true;
            generateIcon.classList.add('hidden');
            generateSpinner.classList.remove('hidden');
            
            afterImage.classList.add('hidden');
            loadingState.classList.remove('hidden');
            errorState.classList.add('hidden');
            
            // Start scan line animation after a delay
            setTimeout(() => {
                scanLine.classList.remove('hidden');
            }, 1000);

            try {
                const prompt = `Redesign this room in a ${stylePrompt.value.trim()} style.`;
                const base64Image = uploadedImageData.split(',')[1];

                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=YOUR_API_KEY', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: prompt },
                                { inlineData: { mimeType: "image/jpeg", data: base64Image } }
                            ]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }

                const data = await response.json();
                const generatedImageData = data.candidates[0].content.parts[0].inlineData.data;
                
                setTimeout(() => {
                    afterImage.src = `data:image/png;base64,${generatedImageData}`;
                    afterImage.classList.remove('hidden');
                    loadingState.classList.add('hidden');
                    scanLine.classList.add('hidden');
                    slider.classList.remove('hidden');
                    sliderLabels.classList.remove('hidden');
                }, 2000);

            } catch (error) {
                console.error('Error generating image:', error);
                loadingState.classList.add('hidden');
                scanLine.classList.add('hidden');
                errorState.classList.remove('hidden');
            } finally {
                setTimeout(() => {
                    generateBtn.disabled = false;
                    generateIcon.classList.remove('hidden');
                    generateSpinner.classList.add('hidden');
                }, 2000);
            }
        }

        // Image comparison slider functionality
        function initializeSlider() {
            let isSliding = false;

            function updateSlider(clientX) {
                const rect = document.querySelector('.image-comparison-container').getBoundingClientRect();
                const x = clientX - rect.left;
                const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));
                
                slider.style.left = percentage + '%';
                afterContainer.style.width = percentage + '%';
            }

            // Mouse events
            slider.addEventListener('mousedown', function(e) {
                isSliding = true;
                e.preventDefault();
            });

            document.addEventListener('mousemove', function(e) {
                if (!isSliding) return;
                updateSlider(e.clientX);
            });

            document.addEventListener('mouseup', function() {
                isSliding = false;
            });

            // Touch events for mobile
            slider.addEventListener('touchstart', function(e) {
                isSliding = true;
                e.preventDefault();
            });

            document.addEventListener('touchmove', function(e) {
                if (!isSliding) return;
                e.preventDefault();
                updateSlider(e.touches[0].clientX);
            });

            document.addEventListener('touchend', function() {
                isSliding = false;
            });

            // Container click to move slider
            document.querySelector('.image-comparison-container').addEventListener('click', function(e) {
                if (e.target === slider || e.target.closest('.image-comparison-slider')) return;
                updateSlider(e.clientX);
            });
        }

        // Initialize slider when page loads
        initializeSlider();
    </script>
</body>
</html>
